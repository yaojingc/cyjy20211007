(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1034:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(39)),o=E(a(2)),r=E(a(12)),l=E(a(4)),i=E(a(8)),s=E(a(5)),d=E(a(6)),c=E(a(200)),p=E(a(139)),u=E(a(76));a(199),a(195),a(111);var f=a(1),m=E(f),h=E(a(0)),g=a(29),y=E(a(90)),T=E(a(26)),k=a(17),b=E(a(58)),v=E(a(979)),C=a(940),w=a(996),D=a(1035),x=E(a(422));function E(e){return e&&e.__esModule?e:{default:e}}a(1036);var S=E(a(33)).default.base,P=S.NCDiv,N=S.NCButton,M=S.NCTree,R=u.default.Option,A=M.NCTreeNode,K=p.default.Search,_=c.default.TabPane,j=["abc1234567","abc2234567","abc3334567"],V=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.reqAllowTreeData=function(){var e=a.state,t=e.orgidObj,n=e.nodeKeyValue,r=a.props,l=r.templatePk,i=r.pageCode,s=r.appCode,d=r.def1,c=r.json,p={pageCode:i,orgId:t.refpk,templateId:l,appCode:s};"apppage"===d?p.templateType="bill":"menuitem"===d&&(p.templateType="print",p.pageCode&&delete p.pageCode,p.pageCode=n),a.props.mobileInfoData&&(p=(0,o.default)({orgId:t.refpk},a.props.mobileInfoData)),(0,T.default)({url:"/nccloud/platform/template/listAssignmentsOfTemplate.do",info:{name:c["10180TM-000002"],action:c["10180TM-000003"]},data:p,success:function(e){var t=e.data;t.success&&a.setState({allowDataArray:t.data},a.restoreAllowedTree)}})},a.restoreAllowedTree=function(){var e=a.state,t=e.allowDataArray,n=e.treeAllowedData;t.map((function(e){e.text=e.code+"  "+e.name,e.key=e.id})),n=(0,w.generateTreeData)(t),a.setState({treeAllowedData:n})},a.reqRoTreeData=function(){var e=a.state.orgidObj,t=a.props.json;if(e.refpk){var n={orgId:e.refpk};(0,T.default)({url:"/nccloud/platform/template/getAllRoleUserAndResp.do",info:{name:(0,k.langCheck)("10180TM-000004","pages",t),action:(0,k.langCheck)("10180TM-000005","pages",t)},data:n,success:function(e){var t=e.data;t.success&&t.data&&((t.data.roles||t.data.users||t.data.resps)&&(a.restoreRoTreeData(t.data),a.restoreResTreeData(t.data.resps)),a.props.setRoleUserDatas(t.data),a.reqAllowTreeData())}})}},a.restoreResTreeData=function(e){var t=a.state.treeResData,n=a.props.json;t=[],D.initAbiTreeData.text=(0,k.langCheck)("10180TM-000006","pages",n),D.initAbiTreeData2.text=(0,k.langCheck)("10180TM-000006","pages",n);var o=D.initAbiTreeData;e.map((function(e){var t=e.code,a=e.name;e.text=t+"  "+a,e.type="resp"})),o.children=e,t.push(o),t=(0,w.generateTreeData)(t),a.setState({treeResData:t})},a.restoreRoTreeData=function(e){var t=a.state.treeRoData,n=a.props.json;t=[],D.initRoTreeData.text=(0,k.langCheck)("10180TM-000007","pages",n),D.initUserTreeData.text=(0,k.langCheck)("10180TM-000008","pages",n),D.initRoTreeData2.text=(0,k.langCheck)("10180TM-000007","pages",n),D.initUserTreeData2.text=(0,k.langCheck)("10180TM-000008","pages",n);var o=D.initRoTreeData,r=D.initUserTreeData;e.roles.map((function(e){e.type="roles"})),e.users.map((function(e){e.type="users"})),o.children=(0,w.generateRoData)(e.roles),r.children=(0,w.generateRoData)(e.users),t.push(o),t.push(r),t=(0,w.generateTreeData)(t),a.setState({treeRoData:t})},a.selectRoFun=function(e){var t=a.state.roCheckedKeys,o=e.node.props.refData.id,r=t.indexOf(o);r>-1?t.splice(r,1):t.push(o),a.setState({roCheckedKeys:[].concat((0,n.default)(t))},a.lookCheckDataFun)},a.arrayUnique=function(e){for(var t=[],a=0,n=e.length;a<n;a++){for(var o=a+1;o<n;o++)e[a].id==e[o].id&&++a;t.push(e[a])}return t},a.allowClick=function(e){var t=a.state,n=t.allowDataArray,o=t.treeAllowedData,r=t.allowedCheckedKeys,l=a.props,i=l.roCheckedObjArray,s=l.json;switch(e){case"allowRole":if(i&&0===i.length)return void(0,b.default)({status:"warning",msg:(0,k.langCheck)("10180TM-000009","pages",s)});n=n.concat(i),n=a.arrayUnique(n),o=(0,w.generateTreeData)(n);break;case"allowRoleCancel":if(r&&0===r.length)return void(0,b.default)({status:"warning",msg:(0,k.langCheck)("10180TM-000009","pages",s)});Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};for(var d=r.length-1;d>=0;d--)for(var c=0;c<n.length;c++)r[d]&&n[c].id===r[d]&&n.remove(n[c]);o=(0,w.generateTreeData)(n)}a.setState({treeAllowedData:o,allowDataArray:n,allowedCheckedKeys:r})},a.onSelectedAllow=function(e){var t=a.state.allowedCheckedKeys,o=e.node.props.refData.id,r=t.indexOf(o);r>-1?t.splice(r,1):t.push(o),a.setState({allowedCheckedKeys:[].concat((0,n.default)(t))})},a.onSelect=function(e,t){switch(e){case"resOnselect":a.selectRoFun(t);break;case"allowedOnselect":a.onSelectedAllow(t)}},a.hanldeDoubleClick=function(e,t){var n=void 0,o=[];switch(e){case"resOnselect":n=t.props.refData.key,o=a.state.expandedKeys.concat([n]),a.setState({expandedKeys:o})}},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onSearch=function(e){var t=e.target.value,n=a.state.tabActiveKey,o=a.props.roleUserDatas,r=[],l=[],i=[];if("1"===n)if(t){for(var s in o)o.hasOwnProperty(s)&&("users"!==s&&"roles"!==s||o[s].map((function(e){e.text=e.code+"  "+e.name,e.text.indexOf(t)>-1&&(r.push(e.key),l.push(e))})));l.map((function(e){e.key=e.id}));var d=y.default.cloneDeep(D.initRoTreeData2),c=y.default.cloneDeep(D.initUserTreeData2);l.map((function(e){"roles"===e.type?d.children.push(e):"users"===e.type&&c.children.push(e)})),i.push(d),i.push(c),i=(0,w.generateTreeData)(i),r.push("abc1234567"),r.push("abc2234567"),a.setState({expandedKeys:r,roleSearchValue:t,autoExpandParent:!0,treeRoData:i})}else a.restoreRoTreeData(o),a.setState({roleSearchValue:t,expandedKeys:[]});else if("2"===n)if(t){for(var p in o)o.hasOwnProperty(p)&&"resps"===p&&o[p].map((function(e){e.text=e.code+"  "+e.name,e.text.indexOf(t)>-1&&(r.push(e.key),l.push(e))}));var u=y.default.cloneDeep(D.initAbiTreeData2);u.children=l,i.push(u),i=(0,w.generateTreeData)(i),r.push("abc3334567"),a.setState({expandedKeys:r,respSearchValue:t,autoExpandParent:!1,treeResData:i})}else a.restoreResTreeData(o.resps),a.setState({respSearchValue:t})},a.onCheck=function(e,t){switch(e){case"resOnselect":a.onCheckRoFun(t);break;case"allowedOnselect":a.onCheckAllowedFun(t)}},a.onCheckRoFun=function(e){var t=e.filter((function(e){return!j.includes(e)}));a.setState({roCheckedKeys:t},a.lookCheckDataFun)},a.lookCheckDataFun=function(){var e=a.state.roCheckedKeys,t=a.props.roleUserDatas,n=e.filter((function(e){return"abc1234567"!==e&&"abc2234567"!==e&&"abc3334567"!==e})),o=[];n.map((function(e){var a={},n=function(n){t[n].map((function(t){t.id===e&&(a.key=t.id,a.id=t.id,a.pk=t.id,a.text=t.code+"  "+t.name,a.code=t.code,"users"===n?a.type="user":"roles"===n?a.type="role":"resps"===n&&(a.type="resp"))}))};for(var r in t)n(r);o.push(a)})),a.props.setRoCheckedObjArray(o)},a.onCheckAllowedFun=function(e){a.setState({allowedCheckedKeys:e})},a.handleSearchDel=function(){var e=a.state.tabActiveKey,t=a.props.roleUserDatas;switch(e){case"1":a.restoreRoTreeData(t),a.setState({roleSearchValue:"",expandedKeys:[]});break;case"2":a.restoreResTreeData(t.resps),a.setState({respSearchValue:"",expandedKeys:[]})}},a.treeResAndUser=function(e,t,n,o,r,l){var i=a.state,s=i.expandedKeys,d=i.autoExpandParent,c=a.props.json;return m.default.createElement("div",{className:r||""},n?"":m.default.createElement("div",{className:"fixed-search-input"},m.default.createElement(K,{style:{marginBottom:8},placeholder:(0,k.langCheck)("10180TM-000010","pages",c),onChange:a.onSearch,value:o,suffix:o.length>0?m.default.createElement("i",{className:"iconfont icon-qingkong",onClick:function(){a.handleSearchDel()}}):"",fieldid:"search"})),e.length>0&&m.default.createElement(P,{fieldid:n?"allocationRight":"allocationLeft",areaCode:P.config.TreeCom},m.default.createElement(M,{showLine:!0,checkable:!0,onExpand:a.onExpand,expandedKeys:s,onSelect:function(e,n){a.onSelect(t,n)},autoExpandParent:d,onDoubleClick:function(e,n){a.hanldeDoubleClick(t,n)},onCheck:function(e){a.onCheck(t,e)},checkedKeys:l},function e(a){return a.map((function(a){var n=a.text,r=a.id,l=void 0;if("resOnselect"===t){var i=n.indexOf(o),d=n.substr(0,i),c=n.substr(i+o.length);l=i>-1?m.default.createElement("span",null,a.children?m.default.createElement("span",{className:"tree-switch-icon iconfont "+(s.includes(r)?"icon-wenjianjiadakai":"icon-wenjianjia")}):m.default.createElement("span",{className:"tree-dot"}),d,m.default.createElement("span",{style:{color:"#f50"}},o),c):m.default.createElement("span",null,m.default.createElement("span",null," ",n," "))}else"allowedOnselect"===t&&(l=n);var p=a.children?"fieldid_"+n+"_node":"fieldid_"+a.code+"_node";return a.children&&a.children.length>0?m.default.createElement(A,{key:r,title:l,refData:a,className:p},e(a.children)):m.default.createElement(A,{key:r,title:l,refData:a,className:p})}))}(e))))},a.handleAlloOk=function(){var e=a.state,t=e.treeAllowedData,n=e.orgidObj,r=e.nodeKeyValue,l=a.props,i=l.templatePk,s=l.appCode,d=l.pageCode,c=l.def1,p=l.json;if(n.refpk)if(t){for(var u={},f=0;f<t.length;f++){var m=t[f];for(var h in m)"id"===h&&(u[m[h]]=m.type)}var g="";for(var y in u)g=g+(y+":")+u[y]+",";var v=g.length;g=g.substr(0,v-1);var C={pageCode:d,templateId:i,orgId:n.refpk,appCode:s};C.targets=g,"apppage"===c?C.templateType="bill":"menuitem"===c&&(C.templateType="print",C.pageCode&&delete C.pageCode,r&&(C.pageCode=r)),a.props.mobileInfoData&&(C=(0,o.default)({},C,a.props.mobileInfoData)),(0,T.default)({url:"/nccloud/platform/template/assignTemplate.do",data:C,loading:!0,info:{name:(0,k.langCheck)("10180TM-000012","pages",p),action:(0,k.langCheck)("10180TM-000013","pages",p)},success:function(e){var t=e.data;t.success&&((0,b.default)({status:"success",msg:t.msg}),localStorage.removeItem("appTempletStorage_"+s+"_"+d),a.props.setAssignModalVisible(!1))}})}else(0,b.default)({status:"warning",msg:(0,k.langCheck)("10180TM-000009","pages",p)});else(0,b.default)({status:"error",msg:(0,k.langCheck)("10180TM-000011","pages",p)})},a.handleOrlCancel=function(){a.props.setAssignModalVisible(!1)},a.handdleRefChange=function(e){var t=a.state.orgidObj,n=e.refname,o=e.refcode,r=e.refpk;t.refname=n,t.refcode=o,t.refpk=r,a.setState({orgidObj:t},a.reqRoTreeData)},a.state={expandedKeys:[],roleSearchValue:"",respSearchValue:"",autoExpandParent:!1,nodeKeyValue:a.props.nodeKey&&a.props.nodeKey.length>0?a.props.nodeKey[0]:"",treeRoData:[],treeResData:[],roCheckedKeys:[],allowedCheckedKeys:[],allowDataArray:[],treeAllowedData:[],orgidObj:{refcode:"",refname:window.GETBUSINESSINFO().groupName,refpk:window.GETBUSINESSINFO().groupId},tabActiveKey:"1",json:{}},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.state.orgidObj.refpk&&this.reqRoTreeData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.orgidObj,n=t.treeRoData,o=t.treeResData,r=t.treeAllowedData,l=t.tabActiveKey,i=t.roleSearchValue,s=t.respSearchValue,d=t.allowedCheckedKeys,p=t.roCheckedKeys,f=this.props,h=f.pageCode,g=f.def1,y=f.nodeKey,T=f.json,b=f.mobileInfoData;return m.default.createElement(x.default,{dialogClassName:"allocation-modal",title:(0,k.langCheck)("10180TM-000014","pages",T),visible:this.props.alloVisible,onOk:this.handleAlloOk,onCancel:this.handleOrlCancel,okText:(0,k.langCheck)("10180TM-000015","pages",T),cancelText:(0,k.langCheck)("10180TM-000016","pages",T),width:720,maskClosable:!1,keyboard:!0,centered:!0,fieldid:"allocation"},m.default.createElement("div",{className:"allocationPage"},m.default.createElement("div",{className:"pageCode-show"},m.default.createElement("p",{className:"pageCodeName"},(0,k.langCheck)("10180TM-000017","pages",T),m.default.createElement("span",null,h||b&&b.pageCode)),"menuitem"===g&&m.default.createElement("div",null,m.default.createElement("label",{htmlFor:""},(0,k.langCheck)("10180TM-000018","pages",T)),m.default.createElement(u.default,{showSearch:!0,style:{width:200},placeholder:(0,k.langCheck)("10180TM-000019","pages",T),optionFilterProp:"children",onSelect:function(t){e.setState({nodeKeyValue:t},(function(){e.reqAllowTreeData()}))},defaultValue:null==y?"":y[0],filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},y&&y.length>0&&y.map((function(e,t){if(e)return m.default.createElement(R,{value:e},e)}))))),m.default.createElement("div",{className:"allocationPage-content"},m.default.createElement("div",{className:"allocationPage-content-tree"},m.default.createElement("div",{className:"allocation-treeCom"},m.default.createElement(c.default,{defaultActiveKey:"1",activeKey:l,renderTabBar:function(e,t){return m.default.createElement(P,{areaCode:P.config.TABS}," ",m.default.createElement(t,e))},onChange:function(t){e.setState({tabActiveKey:t})}},m.default.createElement(_,{tab:(0,k.langCheck)("10180TM-000020","pages",T),key:"1"},m.default.createElement(P,{className:"allocation-treeScrollName",fieldid:"allocationUser",areaCode:P.config.TREE},this.treeResAndUser(n,"resOnselect",null,i,"searchTree-assign",p))),m.default.createElement(_,{tab:(0,k.langCheck)("10180TM-000006","pages",T),key:"2"},m.default.createElement(P,{className:"allocation-treeScrollName",fieldid:"allocationDuty",areaCode:P.config.TREE},this.treeResAndUser(o,"resOnselect",null,s,"searchTree-assign",p))))),m.default.createElement("div",{className:"allocation-button"},m.default.createElement("div",null,m.default.createElement("div",null,m.default.createElement("p",null,m.default.createElement(N,{fieldid:"toRight",onClick:this.allowClick.bind(this,"allowRole")},m.default.createElement("i",{className:"icon iconfont icon-jiantouyou"}))),m.default.createElement("p",null,m.default.createElement(N,{fieldid:"toLeft",onClick:this.allowClick.bind(this,"allowRoleCancel")},m.default.createElement("i",{className:"icon iconfont icon-jiantouzuo"})))))),m.default.createElement("div",{className:"allocation-treeContainer"},m.default.createElement("div",{className:"allocation-select"},m.default.createElement("label",{htmlFor:""},(0,k.langCheck)("10180TM-000021","pages",T)),m.default.createElement(v.default,{value:a,placeholder:(0,k.langCheck)("10180TM-000022","pages",T),fieldid:"businessUnit",onChange:function(t){e.handdleRefChange(t)}})),m.default.createElement("div",{className:"allocation-tree"},r.length>0&&this.treeResAndUser(r,"allowedOnselect","hideSearch","","",d)))))))}}]),t}(f.Component);V.propTypes={templatePk:h.default.string.isRequired,roCheckedObjArray:h.default.array.isRequired,setRoCheckedObjArray:h.default.func.isRequired,nodeKey:h.default.array.isRequired,roleUserDatas:h.default.object.isRequired,setRoleUserDatas:h.default.func.isRequired,json:h.default.object.isRequired},t.default=(0,g.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,nodeKey:e.TemplateSettingData.nodeKey,roCheckedObjArray:e.TemplateSettingData.roCheckedObjArray,roleUserDatas:e.TemplateSettingData.roleUserDatas}}),{setRoCheckedObjArray:C.setRoCheckedObjArray,setRoleUserDatas:C.setRoleUserDatas})(V)},1035:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initRoTreeData={id:"abc1234567",text:"",children:[]},t.initUserTreeData={id:"abc2234567",text:"",children:[]},t.initRoTreeData2={id:"abc1234567",text:"",children:[]},t.initUserTreeData2={id:"abc2234567",text:"",children:[]},t.initAbiTreeData={id:"abc3334567",text:"",children:[]},t.initAbiTreeData2={id:"abc3334567",text:"",children:[]}},1036:function(e,t,a){var n=a(1037);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(15)(n,o);n.locals&&(e.exports=n.locals)},1037:function(e,t,a){(e.exports=a(13)(!1)).push([e.i,".allocation-modal .u-modal-body{padding:15px 0 0}.allocationPage .pageCode-show{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row nowrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;margin:0 15px;padding:10px 20px;background-color:#f3f3f3}.allocationPage .pageCode-show .pageCodeName{margin-bottom:0}.allocationPage .allocationPage-content .allocationPage-content-select{padding:15px 20px;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.allocationPage .allocationPage-content .allocationPage-content-select,.allocationPage .allocationPage-content .allocationPage-content-tree{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom{width:42%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-tabs-bar{margin:0;padding:0 5px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName{height:330px;border-right:1px solid #e8e8e8;position:relative;padding-top:50px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign{padding:0 10px;overflow:auto;height:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .fixed-search-input{position:absolute;top:0;left:0;padding:0 15px;width:100%;display:-webkit-box;display:flex;background-color:#fff;z-index:1}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .tree-switch-icon{color:#f2b224;margin-right:5px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .tree-dot{display:inline-block;width:5px;height:5px;background-color:#555;border-radius:100%;margin:0 7px 2px 0}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-input-affix-wrapper{margin-bottom:8px;margin-top:8px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-input-affix-wrapper .ant-input{width:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button{padding-top:43px;width:16%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div{border-top:1px solid #e8e8e8;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:330px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div p{text-align:center;margin-bottom:30px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div .icon{color:rgba(85,85,85,.5)}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer{width:42%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-select{padding:5px 0 8px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-select .refer-wrapper{width:200px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-tree{height:330px;border:1px solid #e8e8e8;border-right:0;border-bottom:0;overflow:auto}",""])},1038:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(a(139)),o=k(a(2)),r=k(a(12)),l=k(a(4)),i=k(a(8)),s=k(a(5)),d=k(a(6));a(195);var c=a(1),p=k(c),u=k(a(0)),f=a(29),m=a(940),h=k(a(422)),g=a(17),y=k(a(26)),T=k(a(58));function k(e){return e&&e.__esModule?e:{default:e}}a(1039);var b=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.replace(/^\s+|\s+$/g,"")},a.checkCode=function(){var e=a.props,t=e.json,n=e.templateTitleVal;if(!a.trim(n))return document.getElementById("templateCode").classList.add("has-error"),void a.setState({codeErrorMsg:(0,g.langCheck)("10180TM-000024","pages",t)});document.getElementById("templateCode").classList.remove("has-error"),a.setState({codeErrorMsg:""})},a.checkName=function(){var e=a.props,t=e.json,n=e.templateNameVal;if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,g.langCheck)("10180TM-000023","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.handleOk=function(){var e=a.props,t=e.def1,n=e.templatePk,r=e.pageCode,l=e.appCode,i=e.templateNameVal,s=e.templateTitleVal,d=e.setSelectedTemKeys,c=e.setParentIdcon,p=e.setTemplateNameVal,u=e.setTemplatePk,f=e.setTemplateTitleVal,m=e.setCopyId,h=e.setIsDefaultTem,k=e.json;if(a.trim(i)){var b={pageCode:r,templateId:n,name:i,appCode:l},v=void 0;if("apppage"===t)b.templateType="bill",v="/nccloud/platform/template/copyTemplate.do";else if("menuitem"===t){if(!a.trim(s))return;b.templateCode=s,v="/nccloud/platform/template/copyPrintTemplate.do"}a.props.mobileInfoData&&(v="/nccloud/platform/template/copyTemplate.do",b=(0,o.default)({},a.props.mobileInfoData,{name:i}));var C=a;(0,g.DeferFn)((function(){(0,y.default)({url:v,data:b,loading:!0,info:{name:(0,g.langCheck)("10180TM-000012","pages",k),action:(0,g.langCheck)("10180TM-000025","pages",k)},success:function(e){var a=e.data;a.success&&((0,T.default)({status:"success",msg:a.msg}),d([a.data.id]),c(a.data.id),p(a.data.name),u(a.data.id),m(a.data.id),h("n"),"menuitem"===t&&f(a.data.code),C.props.onCopy(a.data),C.handleCancel())}})}))}},a.handleCancel=function(){a.props.setCopyVisible(!1)},a.state={nameErrorMsg:"",codeErrorMsg:""},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.nameErrorMsg,o=t.codeErrorMsg,r=this.props,l=r.def1,i=r.treeTemPrintData,s=r.templateTitleVal,d=r.templateNameVal,c=r.json;return p.default.createElement(h.default,{mask:!0,title:(0,g.langCheck)("10180TM-000046","pages",c),visible:this.props.visible,onOk:this.handleOk,okText:(0,g.langCheck)("10180TM-000015","pages",c),cancelText:(0,g.langCheck)("10180TM-000016","pages",c),centered:!0,onCancel:this.handleCancel,maskClosable:!1,fieldid:"copy"},p.default.createElement("div",{className:"copyTemplate",style:"apppage"===l?{padding:"60px 20px"}:{}},"menuitem"==l&&i.length>0&&p.default.createElement("div",{className:"templateCode"},p.default.createElement("label",{htmlFor:""},(0,g.langCheck)("10180TM-000027","pages",c)),p.default.createElement(n.default,{style:{width:"80%"},id:"templateCode",onBlur:this.checkCode,value:s,placeholder:(0,g.langCheck)("10180TM-000028","pages",c),fieldid:"templateCode",onChange:function(t){var a=t.target.value;e.props.setTemplateTitleVal(a)}}),p.default.createElement("p",{className:"areaCode-errorMsg"},o)),p.default.createElement("div",{className:"templateName"},p.default.createElement("label",{htmlFor:""},(0,g.langCheck)("10180TM-000029","pages",c)),p.default.createElement(n.default,{value:d,style:{width:"80%"},id:"templateName",onBlur:this.checkName,placeholder:(0,g.langCheck)("10180TM-000030","pages",c),fieldid:"templateName",onChange:function(t){var a=t.target.value;e.props.setTemplateNameVal(a)}}),p.default.createElement("p",{className:"areaName-errorMsg"},a))))}}]),t}(c.Component);b.propTypes={templatePk:u.default.string.isRequired,pageCode:u.default.string.isRequired,appCode:u.default.string.isRequired,def1:u.default.string.isRequired,templateTitleVal:u.default.string.isRequired,templateNameVal:u.default.string.isRequired,json:u.default.object.isRequired},t.default=(0,f.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData}}),{setSelectedTemKeys:m.setSelectedTemKeys,setParentIdcon:m.setParentIdcon,setTemplateNameVal:m.setTemplateNameVal,setTemplatePk:m.setTemplatePk,setTemplateTitleVal:m.setTemplateTitleVal,setCopyId:m.setCopyId,setIsDefaultTem:m.setIsDefaultTem})(b)},1039:function(e,t,a){var n=a(1040);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(15)(n,o);n.locals&&(e.exports=n.locals)},1040:function(e,t,a){(e.exports=a(13)(!1)).push([e.i,".copyTemplate{padding:35px 20px}.copyTemplate .ant-input{margin-bottom:20px}.copyTemplate .templateCode,.copyTemplate .templateName{position:relative}.copyTemplate .areaCode-errorMsg,.copyTemplate .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:65px}.copyTemplate .has-error{border-color:#f5222d}",""])},1041:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(2)),o=l(a(197));t.handleDownload=function(e,t,a,l,i,s){var d=""+(window.actionName||"文件导出"),c=e.appcode,p={sys_busiaction:d,sys_appcode:c,sys_ts:(new Date).getTime()};a=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(a);var u=[{target:l||"_blank",method:"POST",enctype:a,type:"hidden",action:t||""},document.createElement("form")],f=u[0],m=u[1];(0,o.default)(m,f);var h=(0,n.default)({},e,p),g=function(e){if(h[e]instanceof Array)h[e].forEach((function(t){var a=document.createElement("input");a.type="hidden",a.name=e,a.value=t,m.appendChild(a)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=h[e],m.appendChild(t)}};for(var y in h)g(y);try{document.body.appendChild(m),m.submit(),document.body.removeChild(m),(0,r.default)({status:"success",msg:i||"导出成功"})}catch(e){(0,r.default)({status:"error",msg:s||"导出失败"})}return!1};var r=l(a(58));function l(e){return e&&e.__esModule?e:{default:e}}},1042:function(e,t,a){e.exports=a.p+"images/noPage.png"},1043:function(e,t,a){e.exports=a.p+"images/noPrint.png"},1044:function(e,t,a){e.exports=a.p+"images/unSelected.png"},1075:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(914));a(912);var o=r(a(427));function r(e){return e&&e.__esModule?e:{default:e}}var l=n.default.TreeNode;t.default=function e(t,a){return t.map((function(t){var n=t.code,r=t.name,i=t.pk,s=n+" "+r;"00"===n&&(s=""+r);var d=s.indexOf(a),c=s.substr(0,d),p=s.substr(d+a.length),u=d>-1?React.createElement("span",null,c,React.createElement("span",{style:{color:"#f50"}},a),p):React.createElement("span",null,React.createElement("span",null," ",s," ")),f="00"===n?"fieldid_"+r+"_node":"fieldid_"+n+"_node";return t.children&&t.children.length>0?React.createElement(l,{key:i,title:u,refData:t,icon:function(e){var t=e.expanded;return React.createElement(o.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return React.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})},className:f},e(t.children,a)):React.createElement(l,{icon:React.createElement("span",{className:"tree-dot"}),key:i,title:u,refData:t,className:f})}))}},1269:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a(914)),o=b(a(94)),r=b(a(95)),l=b(a(12)),i=b(a(4)),s=b(a(8)),d=b(a(5)),c=b(a(6)),p=b(a(139));a(912),a(195);var u=a(1),f=b(u),m=b(a(0)),h=a(29),g=a(940),y=a(902),T=a(17),k=b(a(1075));function b(e){return e&&e.__esModule?e:{default:e}}var v=b(a(33)).default.base.NCDiv,C=p.default.Search,w=function(e){function t(e){var a=this;(0,i.default)(this,t);var n,s=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return s.onExpand=function(e){s.props.setExpandedKeys(e),s.setState({autoExpandParent:!1})},s.onChange=function(e){var t=e.target.value;if(t)s.props.setSearchValue(t);else{s.props.reqTreeData(s.props.setInforFun);s.props.setExpandedKeys(["00"]),s.props.setSearchValue("")}},s.handleTreeSearch=function(e){s.props.handleSearch(e,s.props.handleExpanded)},s.onSelectQuery=(n=(0,r.default)(o.default.mark((function e(t,n){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.props.selectedKeys,!(t.length>0)){e.next=13;break}return e.next=4,s.props.setSelectedKeys(t);case 4:return e.next=6,s.props.setDef1(n.selectedNodes[0].props.refData.def1);case 6:return e.next=8,s.props.setAppCode(n.selectedNodes[0].props.refData.appCode);case 8:return e.next=10,s.props.setPageCode(n.selectedNodes[0].props.refData.code);case 10:s.props.onSelect(),e.next=14;break;case 13:r&&s.props.onSelect();case 14:case"end":return e.stop()}}),e,a)}))),function(e,t){return n.apply(this,arguments)}),s.hanldeDoubleClick=function(e){var t,a;t=e.props.refData.pk,a=s.props.expandedKeys.concat([t]),s.props.setExpandedKeys(a)},s.handleSearchDel=function(){s.props.reqTreeData(s.props.setInforFun);s.props.setExpandedKeys(["00"]),s.props.setSearchValue("")},s.state={autoExpandParent:!1},s}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.autoExpandParent,a=this.props,o=a.expandedKeys,r=a.selectedKeys,l=a.searchValue,i=a.json,s=[{code:"00",name:(0,T.langCheck)("10180TM-000000","pages",i),pk:"00",children:(0,y.createTree)(this.props.treeData,"code","pid")}];return f.default.createElement(v,{className:"templateSetting-searchTree workbench-scroll",fieldid:"templateSetting",areaCode:v.config.TREE},f.default.createElement("div",{className:"fixed-search-input"},f.default.createElement(C,{className:l&&"sider-search-color",placeholder:(0,T.langCheck)("10180TM-000001","pages",i),onChange:this.onChange,onSearch:this.handleTreeSearch,value:l,suffix:l.length>0?f.default.createElement("i",{className:"iconfont icon-qingkong",onClick:this.handleSearchDel}):"",fieldid:"search"})),f.default.createElement(v,{fieldid:"templateSetting",areaCode:v.config.TreeCom},s.length>0&&f.default.createElement(n.default,{showLine:!0,showIcon:!0,onExpand:function(t,a){e.onExpand(t,a)},expandedKeys:o,onSelect:function(t,a){e.onSelectQuery(t,a)},autoExpandParent:t,selectedKeys:r,onDoubleClick:function(t,a){e.hanldeDoubleClick(a)}},(0,k.default)(s,l))))}}]),t}(u.Component);w.propTypes={treeData:m.default.array.isRequired,setExpandedKeys:m.default.func.isRequired,setSelectedKeys:m.default.func.isRequired,setDef1:m.default.func.isRequired,setTreeTemPrintData:m.default.func.isRequired,setSearchValue:m.default.func.isRequired,setPageCode:m.default.func.isRequired,setAppCode:m.default.func.isRequired,selectedKeys:m.default.array.isRequired,expandedKeys:m.default.array.isRequired,searchValue:m.default.string.isRequired,pageCode:m.default.string.isRequired,json:m.default.object.isRequired},t.default=(0,h.connect)((function(e){return{treeData:e.TemplateSettingData.treeData,selectedKeys:e.TemplateSettingData.selectedKeys,expandedKeys:e.TemplateSettingData.expandedKeys,searchValue:e.TemplateSettingData.searchValue,json:e.TemplateSettingData.json}}),{setExpandedKeys:g.setExpandedKeys,setSelectedKeys:g.setSelectedKeys,setDef1:g.setDef1,setSearchValue:g.setSearchValue,setPageCode:g.setPageCode,setAppCode:g.setAppCode})(w)},1270:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(12)),o=u(a(4)),r=u(a(8)),l=u(a(5)),i=u(a(6)),s=a(1),d=u(s),c=a(29),p=u(a(1271));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.dataSource;return e.length>0?d.default.createElement("div",{className:"templateTree-wrap"},d.default.createElement("p",{className:"template-title"},this.props.langDataTitle),d.default.createElement(p.default,{dataSource:e,onSelectQuery:this.props.onSelectQuery})):d.default.createElement("div",{className:"print"===this.props.type?"noPrintData":"noPageData"},d.default.createElement("p",{className:"noDataTip"},this.props.langNoDataTitle))}}]),t}(s.Component);f.propTypes={},t.default=(0,c.connect)((function(e){return{}}),{})(f)},1271:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(914)),o=h(a(12)),r=h(a(4)),l=h(a(8)),i=h(a(5)),s=h(a(6));a(912);var d=a(1),c=h(d),p=h(a(0)),u=a(29),f=a(940),m=h(a(1075));function h(e){return e&&e.__esModule?e:{default:e}}var g=h(a(33)).default.base.NCDiv,y=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.onExpand=function(e){a.props.setExpandedTemKeys(e),a.setState({autoExpandTemParent:!1})},a.hanldeDoubleClick=function(e){var t=e.props.refData.pk,n=a.props.expandedTemKeys.concat([t]);a.props.setExpandedTemKeys(n)},a.onExpand=function(e){a.props.setExpandedTemKeys(e),a.setState({autoExpandTemParent:!1})},a.onSelect=function(e,t){a.props.onSelectQuery(e,t)},a.state={autoExpandTemParent:!1},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.autoExpandTemParent,a=this.props,o=a.dataSource,r=a.expandedTemKeys,l=a.selectedTemKeys;return c.default.createElement(g,{className:"templateTree",fieldid:"template",areaCode:g.config.TreeCom,style:1==o.length?{marginLeft:0}:{}},o.length>0&&c.default.createElement(n.default,{showLine:!0,showIcon:!0,onExpand:function(t,a){e.onExpand(t,a)},expandedKeys:r,onSelect:function(t,a){e.onSelect(t,a)},autoExpandParent:t,selectedKeys:l,onDoubleClick:function(t,a){e.hanldeDoubleClick(a)}},(0,m.default)(o,"")))}}]),t}(d.Component);y.propTypes={setSelectedTemKeys:p.default.func.isRequired,setExpandedTemKeys:p.default.func.isRequired,setTemplateNameVal:p.default.func.isRequired,selectedTemKeys:p.default.array.isRequired,expandedTemKeys:p.default.array.isRequired},t.default=(0,u.connect)((function(e){return{selectedTemKeys:e.TemplateSettingData.selectedTemKeys,expandedTemKeys:e.TemplateSettingData.expandedTemKeys}}),{setSelectedTemKeys:f.setSelectedTemKeys,setExpandedTemKeys:f.setExpandedTemKeys})(y)},1272:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a(2)),o=b(a(142)),r=b(a(113)),l=b(a(12)),i=b(a(4)),s=b(a(8)),d=b(a(5)),c=b(a(6)),p=b(a(139));a(195);var u=a(1),f=b(u),m=b(a(0)),h=a(29),g=a(17),y=b(a(26)),T=b(a(58)),k=b(a(422));function b(e){return e&&e.__esModule?e:{default:e}}var v=b(a(33)).default.base,C=v.NCDiv,w=v.NCButton,D=v.NCTree,x=D.NCTreeNode,E=p.default.Search,S=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.replace(/^\s+|\s+$/g,"")},a.checkName=function(){var e=a.props,t=e.json,n=(e.templateNameVal,a.state.templateName);if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,g.langCheck)("10180TM-000023","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.isPartSelectedLeft=function(){var e=a.state,t=e.checkedKeys,n=e.saveLeafArr,l=e.requestLeftTreeData,i=e.treeData,s=[],d=[],c=[],p=[];console.log("checkedKeys----",t),console.log("saveLeafArr----",n),console.log("requestLeftTreeData----",l);var u=t,f=(0,g.deepClone)(i),m=(0,g.deepClone)(l);t.length>0&&(t.map((function(e){f.map((function(t){t.children.map((function(a){e==a.pk&&u.push(t.pk)}))}))})),(u=(0,r.default)(new o.default(u))).map((function(e){m.map((function(t){e==t.pk&&s.push(t)}))})),console.log("checkedArr----",s),s.map((function(e){e.isleaf?(e.children=[],p.push(e)):(e.children=[],c.push(e))})),c.map((function(e){p.map((function(t){e.code==t.pid&&e.children.push(t)}))})),d=c,console.log("checkedTree----",d),a.setState({rightTreeData:d,rightCheckedKeys:[]}))},a.isPartSelectedRight=function(){var e=a.state,t=e.rightCheckedKeys,n=e.rightTreeData,o=(0,g.deepClone)(n);t.length>0&&(t.map((function(e){o.map((function(t,a){e==t.pk?o.splice(a,1):t.children.map((function(a,n){e==a.pk&&t.children.splice(n,1)}))}))})),console.log("partRightTreeArr---",o),a.setState({rightTreeData:o}))},a.isAllSelectedLeft=function(){console.log("this.state.saveLeafArr",a.state.saveLeafArr),a.setState({rightTreeData:a.state.treeData,rightCheckedKeys:[]})},a.isAllSelectedRight=function(){a.setState({rightTreeData:[],rightCheckedKeys:[]})},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onCheck=function(e){a.setState({checkedKeys:e})},a.onRightCheck=function(e){a.setState({rightCheckedKeys:e})},a.onSelect=function(e,t){a.setState({selectedKeys:e})},a.renderTreeNodes=function(e){return e.map((function(e){var t=a.state.searchValue,o=e.name,r=(e.pk,void 0);if(""!=t){var l=o.indexOf(t),i=o.substr(0,l),s=o.substr(l+t.length);r=l>-1?f.default.createElement("span",null,i,f.default.createElement("span",{style:{color:"#f50"}},t),s):f.default.createElement("span",null,f.default.createElement("span",null," ",o," "))}else r=o;var d="fieldid_"+o+"_node";return e.children?f.default.createElement(x,{title:r,key:e.pk,dataRef:e,className:d},a.renderTreeNodes(e.children)):f.default.createElement(x,(0,n.default)({},e,{className:d}))}))},a.rightRenderTreeNodes=function(e){return e.map((function(e){var t="fieldid_"+e.name+"_node";return e.children?f.default.createElement(x,{title:e.name,key:e.pk,dataRef:e,className:t},a.renderTreeNodes(e.children)):f.default.createElement(x,e)}))},a.handleOk=function(){var e=a.props,t=e.templatePk,n=(e.pageCode,e.appCode,e.def1,e.templateTitleVal,e.templateNameVal,e.json),o=a.state,r=o.templateName,l=o.rightTreeData;if(""!=r){var i=(0,g.deepClone)(l);i.map((function(e){e.children.map((function(e){e.pageCode=e.code,delete e.appId,delete e.appCode,delete e.pk,delete e.name,delete e.pid,delete e.isleaf,delete e.children,delete e.code})),e.pageCodes=e.children,delete e.appId,delete e.pk,delete e.code,delete e.name,delete e.pid,delete e.isleaf,delete e.children}));var s={templateId:t,templateName:r,templateType:"bill",appAndPageCodes:i},d=a;(0,g.DeferFn)((function(){(0,y.default)({url:"/nccloud/platform/template/copyTemplateToOtherAppsAction.do",data:s,loading:!0,info:{name:(0,g.langCheck)("10180TM-000012","pages",n),action:(0,g.langCheck)("10180TM-000025","pages",n)},success:function(e){var t=e.data;t.success&&((0,T.default)({status:"success",msg:t.data}),d.props.reqTreeTemData("copyOthersApp"),d.handleCancel())}})}))}},a.handleCancel=function(){a.props.setCopyOthersVisible(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.searchOnChange=function(e){var t=e.target.value;a.setState({searchValue:t});var n=a.state,o=(n.treeData,n.searchTreeDataSave),r=n.requestLeftTreeData;if(""!=t){var l=(0,g.deepClone)(r).filter((function(e){return e.isleaf?e.name.indexOf(t)>-1?e:void 0:e})),i=[],s=[];l.map((function(e){e.children=[],e.isleaf?s.push(e):i.push(e)})),i.map((function(e){s.map((function(t){e.code==t.pid&&e.children.push(t)}))}));var d=i.filter((function(e){if(e.children.length>0)return e}));console.log("newTree=------------",d);var c=(0,g.deepClone)(d);a.setState({treeData:c})}else a.setState({treeData:o})},a.state={nameErrorMsg:"",templateName:a.props.templateNameVal,treeData:[],searchTreeDataSave:[],selectedKeys:[],checkedKeys:[],expandedKeys:[],autoExpandParent:!1,saveLeafArr:[],generateRightTreeData:[],rightTreeData:[],rightCheckedKeys:[],requestLeftTreeData:[],searchValue:""},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.appCode,n=t.json;this.state.requestLeftTreeData;(0,y.default)({data:{appCode:a},url:"/nccloud/platform/template/queryAppAndPagesAction.do",loading:!0,info:{name:(0,g.langCheck)("10180TM-000012","pages",n),action:(0,g.langCheck)("10180TM-000055","pages",n)},success:function(t){var a=t.data;if(a.success){var n=[],o=[],r=(0,g.deepClone)(a.data);a.data.map((function(e){e.isleaf?(e.children=[],o.push(e)):(e.children=[],n.push(e))})),console.log("isAllRootNode",n),console.log("isAllLeafNode",o),n.map((function(e){o.map((function(t){e.code==t.pid&&e.children.push(t)}))})),console.log("isAllRootNode====",n),console.log("isAllLeafNode====",o),e.setState({treeData:n,searchTreeDataSave:n,saveLeafArr:o,requestLeftTreeData:r})}}})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.templateNameVal,a=e.json;console.log("templateNameVal",t);var n=this.state,o=n.templateName,r=n.treeData,l=(n.selectedKeys,n.checkedKeys,n.expandedKeys,n.autoExpandParent),i=n.rightTreeData,s=(n.rightCheckedKeys,n.nameErrorMsg);return f.default.createElement(k.default,{mask:!0,title:(0,g.langCheck)("10180TM-000055","pages",a),visible:this.props.copyOthersModalVisible,onOk:this.handleOk,okText:(0,g.langCheck)("10180TM-000015","pages",a),cancelText:(0,g.langCheck)("10180TM-000016","pages",a),centered:!0,onCancel:this.handleCancel,maskClosable:!1,width:720,className:"copy-others-moudle",fieldid:"copyOther"},f.default.createElement("div",{className:"copy-others-modal-top"},f.default.createElement("div",{className:"copy-others-modal-header"},(0,g.langCheck)("10180TM-000057","pages",a)),f.default.createElement(p.default,{className:"copy-others-input",style:{width:"45%"},placeholder:(0,g.langCheck)("10180TM-000030","pages",a),defaultValue:t,onChange:this.onChangeTemplateName,id:"templateName",fieldid:"templateName",value:o,onBlur:this.checkName}),f.default.createElement("p",{className:"areaName-errorMsg"},s)),f.default.createElement(C,{className:"copy-others-modal-bottom",fieldid:"transfer",areaCode:C.config.Area},f.default.createElement(C,{className:"left",fieldid:"left",areaCode:C.config.TREE},f.default.createElement("div",{className:"title"},(0,g.langCheck)("10180TM-000058","pages",a)),f.default.createElement(E,{className:"search",fieldid:"search",onChange:this.searchOnChange}),f.default.createElement(C,{className:"leftTree",fieldid:"left",areaCode:C.config.TreeCom},f.default.createElement(D,{checkable:!0,checkStrictly:!1,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,onExpand:this.onExpand,expandedKeys:this.state.expandedKeys,onSelect:this.onSelect,selectedKeys:this.state.selectedKeys,checkedKeys:this.state.checkedKeys,onCheck:this.onCheck},this.renderTreeNodes(r)))),f.default.createElement("div",{className:"middle"},f.default.createElement("div",{className:"tree-transfer-buttons"},f.default.createElement(w,{className:"transfer-right ",fieldid:"toRight",onClick:this.isPartSelectedLeft},f.default.createElement("i",{className:"iconfont icon-jiantouyou"})),f.default.createElement(w,{className:"transfer-right-double margin-top-8",fieldid:"toRightAll",onClick:this.isAllSelectedLeft},f.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouyou"}),f.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouyou"})),f.default.createElement(w,{className:"transfer-left-double margin-top-25",fieldid:"toLeft",onClick:this.isAllSelectedRight},f.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouzuo"}),f.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouzuo"})),f.default.createElement(w,{className:"transfer-left margin-top-8",fieldid:"toRightAll",onClick:this.isPartSelectedRight},f.default.createElement("i",{className:"iconfont icon-jiantouzuo"})))),f.default.createElement("div",{className:"right"},f.default.createElement("div",{className:"title"},(0,g.langCheck)("10180TM-000059","pages",a)),f.default.createElement(C,{className:"rightTree",fieldid:"right",areaCode:C.config.TreeCom},f.default.createElement(D,{checkable:!0,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,checkedKeys:this.state.rightCheckedKeys,onCheck:this.onRightCheck},this.rightRenderTreeNodes(i))))))}}]),t}(u.Component);S.propTypes={templatePk:m.default.string.isRequired,pageCode:m.default.string.isRequired,appCode:m.default.string.isRequired,def1:m.default.string.isRequired,templateTitleVal:m.default.string.isRequired,templateNameVal:m.default.string.isRequired,json:m.default.object.isRequired},t.default=(0,h.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,json:e.TemplateSettingData.json}}),{})(S)},1273:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(139)),o=y(a(12)),r=y(a(4)),l=y(a(8)),i=y(a(5)),s=y(a(6));a(195);var d=a(1),c=y(d),p=y(a(0)),u=a(29),f=y(a(422)),m=a(17),h=y(a(26)),g=y(a(58));function y(e){return e&&e.__esModule?e:{default:e}}var T=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.replace(/^\s+|\s+$/g,"")},a.checkName=function(){var e=a.props,t=e.json,n=(e.templateNameVal,a.state.templateName);if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,m.langCheck)("10180TM-000023","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.handleOk=function(){var e=a.props,t=e.templatePk,n=e.templateNameVal,o=e.json,r=e.saveLeftArrTS,l=a.state.templateName;if(a.trim(n)&&""!=l){var i="";1==r.length?r.map((function(e){i=e.ts})):r.length>1&&r.map((function(e){t==e.templateId&&(i=e.ts)})),document.getElementById("templateName").classList.remove("has-error");var s={templateId:t,templateName:l,ts:i},d=a;(0,m.DeferFn)((function(){(0,h.default)({url:"/nccloud/platform/template/resetTemplateNameAction.do",data:s,loading:!0,info:{name:(0,m.langCheck)("10180TM-000012","pages",o),action:(0,m.langCheck)("10180TM-000025","pages",o)},success:function(e){var t=e.data;t.success&&((0,g.default)({status:"success",msg:t.msg}),d.props.reqTreeTemData("rename"),d.handleCancel())}})}))}},a.handleCancel=function(){a.props.setReNameModal(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.state={templateName:a.props.templateNameVal,nameErrorMsg:""},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.reNameModalVisible,o=e.templateNameVal,r=this.state,l=r.templateName,i=r.nameErrorMsg;return console.log("templateNameVal",o),c.default.createElement(f.default,{mask:!0,title:(0,m.langCheck)("10180TM-000056","pages",t),visible:a,height:260,onOk:this.handleOk,okText:(0,m.langCheck)("10180TM-000015","pages",t),cancelText:(0,m.langCheck)("10180TM-000016","pages",t),centered:!0,onCancel:this.handleCancel,maskClosable:!1,fieldid:"rename"},c.default.createElement("div",{className:"copyTemplate",style:{padding:"60px 20px"}},c.default.createElement("div",{className:"templateName"},c.default.createElement("label",{htmlFor:""},(0,m.langCheck)("10180TM-000029","pages",t)),c.default.createElement(n.default,{value:l,defaultValue:o,id:"templateName",style:{width:"80%"},onBlur:this.checkName,placeholder:(0,m.langCheck)("10180TM-000030","pages",t),fieldid:"templateName",onChange:this.onChangeTemplateName}),c.default.createElement("p",{className:"areaName-errorMsg"},i))))}}]),t}(d.Component);T.propTypes={templatePk:p.default.string.isRequired,pageCode:p.default.string.isRequired,appCode:p.default.string.isRequired,def1:p.default.string.isRequired,templateTitleVal:p.default.string.isRequired,templateNameVal:p.default.string.isRequired,json:p.default.object.isRequired},t.default=(0,u.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,json:e.TemplateSettingData.json}}),{})(T)},1274:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(12)),o=h(a(4)),r=h(a(8)),l=h(a(5)),i=h(a(6)),s=a(1),d=h(s),c=h(a(0)),p=a(29),u=a(17),f=h(a(422)),m=h(a(26));function h(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.hideModal=function(){a.props.hideModal(!1)},a.printModalAjax=function(e){var t=a.props.json,n={};n.templateId=e;(0,m.default)({url:"/nccloud/platform/template/previewPrintTemplate.do",data:n,info:{name:(0,u.langCheck)("10180TM-000012","pages",t),action:(0,u.langCheck)("10180TM-000025","pages",t)},success:function(e){var t=e.data;t.success&&(document.getElementsByClassName("printContent")[0].innerHTML=t.data)}})},a.state={},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.printModalAjax(this.props.templatePk)}},{key:"render",value:function(){var e=this.props,t=e.previewPrintVisible,a=e.json;return d.default.createElement("div",{className:"templateTree-wrap"},d.default.createElement(f.default,{customHeader:(0,u.langCheck)("10180TM-000050","pages",a),okText:(0,u.langCheck)("10180TM-000015","pages",a),cancelText:(0,u.langCheck)("10180TM-000016","pages",a),visible:t,onCancel:this.hideModal,maskClosable:!1,footer:null,centered:!0,className:"viewPageTem"},d.default.createElement("div",{className:"printContent"})))}}]),t}(s.Component);g.propTypes={json:c.default.object.isRequired,templatePk:c.default.string.isRequired},t.default=(0,p.connect)((function(e){return{json:e.TemplateSettingData.json,templatePk:e.TemplateSettingData.templatePk}}),{})(g)},1275:function(e,t,a){var n=a(1276);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(15)(n,o);n.locals&&(e.exports=n.locals)},1276:function(e,t,a){var n=a(146);(e.exports=a(13)(!1)).push([e.i,"body{background-color:#f0f2f5}*{box-sizing:border-box}.nc-workbench-templateSetting .nc-workbench-ownpage-left{padding-top:60px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree{padding:10px 20px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input{position:absolute;top:0;left:0;padding:20px 20px 10px;width:100%;display:-webkit-box;display:flex;z-index:1}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input .sider-search-color .ant-input-search-icon{color:#e14c46;vertical-align:middle}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree-wrap{height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree{height:calc(100% - 40px);overflow-y:auto;margin-left:20px}.nc-workbench-templateSetting .nc-workbench-ownpage-right .template-title{height:30px;font-size:15px;line-height:30px;padding-left:20px;margin-bottom:10px;background:#f4f4f4}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip{background:url("+n(a(1042))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{background:url("+n(a(1043))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip{background:url("+n(a(1044))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData{width:100%;height:100%;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:-webkit-box;display:flex}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{height:120px;line-height:280px;font-size:14px;color:#888;background-size:contain;text-align:center}.nc-workbench-templateSetting .ant-tree li .ant-tree-node-content-wrapper.ant-tree-node-selected{color:#e14c46}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item:focus{border:none}.ant-dropdown ul.ant-dropdown-menu li.u-dropdown-menu-item-disabled .dropdown-item{color:#ccc}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item:hover{background-color:#ebecf0}.nc-dropdown.u-dropdown .u-dropdown-menu{padding:4px 0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item{height:32px;line-height:32px;padding:0 10px;margin:0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item:focus{border:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled{color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled:hover{background-color:transparent;color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-selected{background-color:transparent}.copy-others-moudle .copy-others-modal-top{margin:4px 15px;position:relative}.copy-others-moudle .copy-others-modal-top .copy-others-modal-header{width:65px;height:21px;display:inline-block;font-size:13px;font-family:MicrosoftYaHei;color:#555;line-height:21px}.copy-others-moudle .copy-others-modal-top .copy-others-input{margin-left:8px;height:30px;font-size:13px;font-family:MicrosoftYaHei;color:#111;line-height:30px}.copy-others-moudle .copy-others-modal-top .areaCode-errorMsg,.copy-others-moudle .copy-others-modal-top .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:72px}.copy-others-moudle .copy-others-modal-bottom{overflow:hidden;margin-top:20px;display:-webkit-box;display:flex}.copy-others-moudle .copy-others-modal-bottom .left{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .left .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .left .search{margin:10px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree{overflow:auto;height:275px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree .ant-tree{overflow:none}.copy-others-moudle .copy-others-modal-bottom .middle{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;margin:0 auto;width:10%}.copy-others-moudle .copy-others-modal-bottom .right{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .right .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .right .rightTree{overflow:auto;height:325px}.copy-others-moudle .copy-others-modal-bottom .right .rightTree .ant-tree{overflow:none}.tree-transfer-buttons{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;padding:8px}.tree-transfer-buttons .u-button{padding:0;width:32px;height:32px;min-width:32px;border-radius:3px}.tree-transfer-buttons .u-button:after{display:none!important}.tree-transfer-buttons .iconfont{font-size:12px}.tree-transfer-buttons .transfer-left-double,.tree-transfer-buttons .transfer-right-double{position:relative}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{position:absolute}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-1{left:6px}.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{right:6px}.margin-top-8{margin-top:8px}.margin-top-25{margin-top:25px}.ant-modal-body{padding:8px}",""])},886:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(39)),o=_(a(12)),r=_(a(4)),l=_(a(8)),i=_(a(5)),s=_(a(6)),d=a(1),c=_(d),p=_(a(0)),u=a(29),f=a(940),m=a(895),h=_(a(26)),g=_(a(58)),y=a(112),T=_(a(937)),k=_(a(1034)),b=_(a(1269)),v=_(a(1270)),C=_(a(1038)),w=_(a(1272)),D=_(a(1273)),x=_(a(1274)),E=a(93),S=a(17),P=a(996),N=_(a(903)),M=a(196),R=_(a(906)),A=_(a(33)),K=a(1041);function _(e){return e&&e.__esModule?e:{default:e}}a(1275);var j=A.default.base,V=j.NCDiv,O=j.NCButton,q=(j.NCUpload,j.NCMenu),I=j.NCDropdown,L=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.setCopyVisible=function(e){a.setState({visible:e})},a.setCopyOthersVisible=function(e){a.setState({copyOthersModalVisible:e})},a.setReNameModal=function(e){a.setState({reNameModal:e})},a.menuFun=function(){var e=a.props,t=e.json,n=!1;return"y"===e.isDefaultTem&&(n=!0),c.default.createElement(q,{onClick:a.settingClick.bind(a)},c.default.createElement(q.Item,{key:"setDefault",disabled:n,fieldid:"setDefault"},c.default.createElement("div",{className:"dropdown-item"},(0,S.langCheck)("10180TM-000033","pages",t))),c.default.createElement(q.NCDivider,null),c.default.createElement(q.Item,{key:"cancelDefault",disabled:!n,fieldid:"cancelDefault"},c.default.createElement("div",{className:"dropdown-item"},(0,S.langCheck)("10180TM-000034","pages",t))))},a.settingClick=function(e){var t=a.props,n=t.templatePk,o=t.pageCode,r=t.appCode,l=t.json,i={templateId:n,pageCode:o,appCode:r},s=e.key;if(n){var d=void 0;switch(s){case"setDefault":d="/nccloud/platform/template/setDefaultTemplate.do",a.setDefaultFun(d,i,(0,S.langCheck)("10180TM-000033","pages",l));break;case"cancelDefault":d="/nccloud/platform/template/cancelDefaultTemplate.do",a.setDefaultFun(d,i,(0,S.langCheck)("10180TM-000034","pages",l))}}else(0,g.default)({status:"warning",msg:(0,S.langCheck)("10180TM-000035","pages",l)})},a.handleClick=function(e){var t=a.props,n=t.def1,o=t.templatePk,r=t.appCode,l=t.json,i=t.pageCode,s={templateId:o},d=window.location.protocol||"http:";if(o)switch(e){case"copy":a.setState({visible:!0});break;case"edit":if("menuitem"===n){var c={appcode:r,templateid:o};a.ajaxFun(c,"/nccloud/platform/template/edittemplate.do",(function(e){window.location.href="uclient://start/"+d+"//"+location.hostname+(location.port?":"+location.port:"")+e.data}))}else(0,E.openPage)("ZoneSetting",!1,{templetid:o,status:"templateSetting",appcode:r,pcode:i});break;case"delete":var p=void 0;"menuitem"===n?p="/nccloud/platform/template/deletePrintTemplate.do":"apppage"===n&&(p="/nccloud/platform/template/deleteTemplateDetail.do"),(0,y.ControlTip)({status:"warning",title:(0,S.langCheck)("10180TM-000036","pages",l),msg:(0,S.langCheck)("10180TM-000037","pages",l),fieldid:"delete",onOk:function(){a.ajaxFun(s,p,(function(e){(0,g.default)({status:"success",msg:e.msg}),a.reqTreeTemData()}))}});break;case"assign":a.setState({alloVisible:!0});break;case"browse":"menuitem"===n?a.showModal():a.setState({batchSettingModalVisibel:!0});break;case"copyOthersApp":a.setState({copyOthersModalVisible:!0});break;case"rename":a.setState({reNameModal:!0});break;case"export":var u={pagecode:i,appcode:r,pk_org:null};(0,K.handleDownload)(u,"/nccloud/platform/appregister/templetexport.do",1,"_blank",(0,S.langCheck)("10180TM-000062","pages",l),(0,S.langCheck)("10180TM-000063","pages",l))}else(0,g.default)({status:"warning",msg:(0,S.langCheck)("10180TM-000035","pages",l)})},a.ajaxFun=function(e,t,a,n,o){(0,h.default)({url:t,data:e,info:{name:"",action:""},success:function(e){var t=e.data;t.success&&(n?n&&"function"==typeof n?a(t,n):(n||o)&&a(t,n,o):a(t))}})},a.setDefaultFun=function(e,t,n){var o=a.props,r=o.def1,l=o.parentIdcon,i=o.json,s=o.appCode,d=o.pageCode;"apppage"===r?t.templateType="bill":"menuitem"===r&&(n===(0,S.langCheck)("10180TM-000034","pages",i)?(t.pageCode&&delete t.pageCode,e="/nccloud/platform/template/cancelDefaultPrintTemplate.do"):n===(0,S.langCheck)("10180TM-000033","pages",i)&&(t.parentId=l,e="/nccloud/platform/template/setDefaultPrintTemplate.do"),t.templateType&&delete t.templateType),a.ajaxFun(t,e,(function(e){(0,g.default)({status:"success",msg:e.msg}),localStorage.removeItem("appTempletStorage_"+s+"_"+d),a.reqTreeTemData("setDefault")}))},a.componentWillMount=function(){(0,M.getMulti)({moduleId:"10180TM",domainName:"workbench",callback:function(e){a.props.setJson(e)}})},a.componentDidMount=function(){var e=a.props,t=e.selectedKeys,n=e.setSelectedKeys,o=e.def1,r=e.expandedKeys,l=e.setExpandedKeys,i=e.appCode,s=e.pageCode,d=e.setAppCode,c=e.setPageCode,p=e.expandedTemKeys,u=e.setExpandedTemKeys,m=e.selectedTemKeys,h=e.setSelectedTemKeys,g=e.searchValue,y=e.setSearchValue;""!==o?(g?a.handleSearch(g,a.handleExpanded):a.reqTreeData(),n(t),(0,f.setDef1)(o),l(r),d(i),c(s),a.reqTreeTemData("historyData"),u(p),h(m)):a.param&&a.param.fourAppCode&&a.param.code&&"equiptool"===a.param.pageName?(y(a.param.fourAppCode),a.handleSearch(a.param.fourAppCode,a.handleExpanded,a.selectedFun)):a.reqTreeData(a.setInformationFun)},a.setInformationFun=function(e){var t=a.props,n=t.setSelectedKeys,o=t.setDef1,r=t.setAppCode,l=t.setPageCode;e&&e.length>0&&(n([e[0].pk]),o(e[0].def1),r(e[0].appCode),e[0].pageCode&&l(e[0].pageCode))},a.handleExpanded=function(e){var t=e.map((function(e,t){return e.pk}));t.push("00"),a.props.setExpandedKeys(t),a.setState({autoExpandParent:!0})},a.handleSearch=function(e,t,n){if(e){(0,S.DeferFn)((function(){a.ajaxFun({search_content:e,containAppPage:!0},"/nccloud/platform/appregister/searchappmenuitem.do",(function(e){a.props.setTreeData(e.data),t(e.data),n&&"function"==typeof n&&n(e.data)}))}))}},a.selectedFun=function(e){if(e&&e.length>0){var t=a.props,n=t.setSelectedKeys,o=t.setDef1,r=t.setAppCode,l=t.setPageCode,i=e.find((function(e){return e.code===a.param.code}));n([i.pk]),o(i.def1),r(i.appCode),i.code&&l(i.code),a.reqTreeTemData()}},a.restoreTreeTemData=function(e,t){var o=a.state,r=o.treeTemBillData,l=o.treeTemPrintData,i=a.props,s=i.def1,d=i.expandedTemKeys,c=i.copyId,p=i.templatePk,u=i.json,f=i.setIsDefaultTem,m=[],h=void 0,g=a.props.treeTemBillData,y=a.props.treeTemPrintData;"bill"===e?h=(0,P.generateTemData)(g):"print"===e&&(h=(0,P.generateTemData)(y));var T=h,k=T.treeArray,b=T.treeObj;if(k.map((function(e){for(var t in b)b.hasOwnProperty(t)&&e.templateId===b[t][0].parentId&&e.children.push(b[t][0])})),m=h.treeArray,m=(0,P.generateTreeData)(m),"bill"===e){if("apppage"===s)if(m.length>0){if(t)t&&"copy"===t?m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){if(c===e.key){var t=[].concat((0,n.default)(d),[e.parentId]);a.props.setExpandedTemKeys(t)}}))})):t&&"setDefault"===t&&m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){p===e.key&&f(e.isDefault)}))}));else{var v=[];v.push(m[0].key),a.props.setSelectedTemKeys(v),a.props.setParentIdcon(m[0].parentId),a.props.setTemplatePk(m[0].pk),a.props.setTemplateNameVal(m[0].name)}m.forEach((function(e){e.children&&e.children.length>0&&e.children.map((function(e){"y"===e.isDefault&&(e.name=e.name+(0,S.langCheck)("10180TM-000038","pages",u))}))}))}else a.props.setParentIdcon("");r=m,a.setState({treeTemBillData:r})}else if("print"===e){if("menuitem"===s)if(m.length>0){if(t)t&&"copy"===t?m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){if(c===e.key){var t=[].concat((0,n.default)(d),[e.parentId]);a.props.setExpandedTemKeys(t)}}))})):t&&"setDefault"===t&&m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){p===e.key&&f(e.isDefault)}))}));else{var C=[];C.push(m[0].key),a.props.setSelectedTemKeys(C),a.props.setTemplatePk(m[0].pk),a.props.setParentIdcon(m[0].parentId),a.props.setTemplateNameVal(m[0].name),a.props.setTemplateTitleVal(m[0].code)}m.forEach((function(e){e.children&&e.children.length>0&&e.children.map((function(e){"y"===e.isDefault&&(e.name=e.name+(0,S.langCheck)("10180TM-000038","pages",u))}))}))}else a.props.setParentIdcon("");l=m,a.setState({treeTemPrintData:l})}},a.onSelectQuery=function(e,t){var n=a.props.selectedKeys;e.length>0?(a.props.setSelectedKeys(e),a.props.setDef1(t.selectedNodes[0].props.refData.def1),a.props.setAppCode(t.selectedNodes[0].props.refData.appCode),a.props.setPageCode(t.selectedNodes[0].props.refData.code),a.setState({autoExpandParent:!0},a.reqTreeTemData)):n&&a.reqTreeTemData()},a.reqTreeTemData=function(e){var t=a.props,n=t.def1,o={pageCode:t.pageCode,appCode:t.appCode};o.pageCode&&("apppage"===n?(o.templateType="bill",a.reqTreeTemAjax(o,"bill",e)):"menuitem"===n&&(o.pageCode&&delete o.pageCode,o.templateType="print",a.reqTreeTemAjax(o,"print",e)))},a.reqTreeTemAjax=function(e,t,n){var o=a.props.selectedTemKeys,r=a;a.ajaxFun(e,"/nccloud/platform/template/getTemplatesOfPage.do",(function(e){e.data.length>0&&r.setState({saveLeftArrTS:e.data}),"bill"===t?(a.props.setTreeTemBillData(e.data),a.restoreTreeTemData(t,n)):"print"===t&&(a.props.setTreeTemPrintData(e.data),a.restoreTreeTemData(t,n),o&&e.data&&e.data.length&&e.data.map((function(e,t){e.templateId===o[0]&&a.props.setNodeKey(e.nodeKey)})))}),t,n)},a.onTemSelect=function(e,t){var n=a.props,o=n.def1,r=n.setIsDefaultTem;if("apppage"===o||"menuitem"===o&&(e.length>0?a.props.setNodeKey(t.selectedNodes[0].props.refData.nodeKey):t.node.props&&t.node.props.refData&&t.node.props.refData.nodeKey&&a.props.setNodeKey(t.node.props.refData.nodeKey)),e.length>0){var l=t.selectedNodes[0].props.refData.name,i=l.indexOf((0,S.langCheck)("10180TM-000038","pages",a.props.json));-1!==i&&(l=l.slice(0,i)),a.props.setSelectedTemKeys(e),a.props.setTemplatePk(e[0]),a.props.setParentIdcon(t.selectedNodes[0].props.refData.parentId),a.props.setTemplateNameVal(l),a.props.setTemplateTitleVal(t.selectedNodes[0].props.refData.code),r(t.selectedNodes[0].props.refData.isDefault)}},a.reqTreeData=function(e){a.ajaxFun({},"/nccloud/platform/appregister/querymenuitemstree.do",(function(e,t){e.success&&e.data.length>0&&(a.props.setTreeData(e.data),t&&"function"==typeof t&&t(e.data))}),e)},a.setModalVisibel=function(e){a.setState({batchSettingModalVisibel:e})},a.setAssignModalVisible=function(e){a.setState({alloVisible:e})},a.showModal=function(){a.setState({previewPrintVisible:!0})},a.hideModal=function(e){a.setState({previewPrintVisible:e})},a.switchPageTem=function(){var e=a.state,t=e.treeTemBillData,n=e.treeTemPrintData,o=a.props.json;switch(a.props.def1){case"apppage":return c.default.createElement(v.default,{type:"bill",dataSource:t,langDataTitle:(0,S.langCheck)("10180TM-000039","pages",o),langNoDataTitle:(0,S.langCheck)("10180TM-000040","pages",o),onSelectQuery:a.onTemSelect});case"menuitem":return c.default.createElement(v.default,{type:"print",dataSource:n,langDataTitle:(0,S.langCheck)("10180TM-000041","pages",o),langNoDataTitle:(0,S.langCheck)("10180TM-000042","pages",o),onSelectQuery:a.onTemSelect});default:return c.default.createElement("div",{className:"noData"},c.default.createElement("p",{className:"noDataTip"},(0,S.langCheck)("10180TM-000043","pages",o)))}},a.menuBtnLoad=function(){var e=a.props,t=e.def1,n=e.parentIdcon,o=e.json;return n&&"root"!==n&&t&&c.default.createElement(I,{overlay:a.menuFun(),trigger:["click"],fieldid:"setDefault"},c.default.createElement(O,{key:"",className:"margin-left-10",fieldid:"setDefault"},(0,S.langCheck)("10180TM-000044","pages",o),c.default.createElement("i",{class:"arrow iconfont icon-hangcaozuoxiala1",style:{fontSize:13}})))},a.beforeUpload=function(e){var t=a.props.json;return!(!e||"application/json"!==e.type)||((0,g.default)({status:"error",msg:(0,S.langCheck)("10180TM-000064","pages",t)}),!1)},a.ncUploadChange=function(e){var t=a.props.json;"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(console.log(e.file.name+" file uploaded successfully"),(0,g.default)({status:"success",msg:(0,S.langCheck)("10180TM-000060","pages",t)}),a.reqTreeTemData()):"error"===e.file.status&&((0,g.default)({status:"error",msg:(0,S.langCheck)("10180TM-000061","pages",t)}),console.log(e.file.name+" file upload failed."))},a.param=(0,S.GetQuery)(a.props.location.search),a.state={siderHeight:"280",autoExpandTemParent:!0,treeTemBillData:[],treeTemPrintData:[],visible:!1,alloVisible:!1,batchSettingModalVisibel:!1,previewPrintVisible:!1,copyOthersModalVisible:!1,reNameModal:!1,saveLeftArrTS:[]},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.alloVisible,o=t.batchSettingModalVisibel,r=t.previewPrintVisible,l=t.copyOthersModalVisible,i=t.reNameModal,s=this.props,d=s.def1,p=s.templatePk,u=s.parentIdcon,f=s.json,h=[{name:(0,S.langCheck)("10180TM-000066","pages",f),type:"primary",code:"export",fieldid:"export",isshow:!1},{name:(0,S.langCheck)("10180TM-000045","pages",f),code:"edit",fieldid:"edit",isshow:d&&"root"!==u&&u},{name:(0,S.langCheck)("10180TM-000036","pages",f),code:"delete",fieldid:"delete",isshow:d&&"root"!==u&&u},{name:(0,S.langCheck)("10180TM-000046","pages",f),type:"primary",code:"copy",fieldid:"copy",isshow:"menuitem"==d&&""!==u},{name:(0,S.langCheck)("10180TM-000046","pages",f),type:"primary",code:"copy",fieldid:"copy",isshow:"apppage"==d&&""!==u,divide:"btn"},{name:(0,S.langCheck)("10180TM-000055","pages",f),type:"primary",code:"copyOthersApp",dropdownFieldid:"copy",fieldid:"copyOthersApp",isshow:"apppage"==d&&""!==u,divide:"select"},{name:(0,S.langCheck)("10180TM-000056","pages",f),code:"rename",fieldid:"rename",isshow:"apppage"==d&&""!==u},{name:(0,S.langCheck)("10180TM-000047","pages",f),code:"assign",fieldid:"assign",isshow:d&&"root"!==u&&u},{name:(0,S.langCheck)("10180TM-000048","pages",f),code:"browse",fieldid:"browse",isshow:d&&""!==u}],g=(0,S.GetQuery)(window.location.hash).c;return c.default.createElement(m.PageLayout,{className:"nc-workbench-templateSetting",header:c.default.createElement(m.PageLayoutHeader,null,c.default.createElement("div",{className:"header_in_icon"},c.default.createElement(R.default,{appCode:g}),c.default.createElement(V,{fieldid:(0,S.langCheck)("10180TM-000049","pages",f),areaCode:V.config.Title},(0,S.langCheck)("10180TM-000049","pages",f))),c.default.createElement("div",{style:{display:"flex"}},!1,c.default.createElement(N.default,{dataSource:h,onClick:this.handleClick}),this.menuBtnLoad()))},c.default.createElement(m.PageLayoutLeft,null,c.default.createElement(b.default,{onSelect:this.reqTreeTemData,reqTreeData:this.reqTreeData,setInforFun:this.setInformationFun,handleSearch:this.handleSearch,handleExpanded:this.handleExpanded})),c.default.createElement(m.PageLayoutRight,null,this.switchPageTem(),o&&c.default.createElement(T.default,{previewVisibel:o,setModalVisibel:this.setModalVisibel,templetData:{pagecode:this.props.pageCode,appcode:this.props.appCode,templetid:p}}),l&&c.default.createElement(w.default,{copyOthersModalVisible:l,setCopyOthersVisible:this.setCopyOthersVisible,reqTreeTemData:this.reqTreeTemData}),a&&c.default.createElement(C.default,{json:this.props.json,visible:a,setCopyVisible:this.setCopyVisible,onCopy:function(){return e.reqTreeTemData("copy")}}),i&&c.default.createElement(D.default,{reNameModalVisible:i,setReNameModal:this.setReNameModal,reqTreeTemData:this.reqTreeTemData,saveLeftArrTS:this.state.saveLeftArrTS}),r&&c.default.createElement(x.default,{previewPrintVisible:r,hideModal:this.hideModal}),n&&c.default.createElement(k.default,{json:this.props.json,alloVisible:n,setAssignModalVisible:this.setAssignModalVisible})))}}]),t}(d.Component);L.propTypes={treeData:p.default.array.isRequired,setTreeData:p.default.func.isRequired,setExpandedKeys:p.default.func.isRequired,setDef1:p.default.func.isRequired,setSelectedTemKeys:p.default.func.isRequired,setTreeTemBillData:p.default.func.isRequired,setTreeTemPrintData:p.default.func.isRequired,setSearchValue:p.default.func.isRequired,setPageCode:p.default.func.isRequired,setAppCode:p.default.func.isRequired,setCopyId:p.default.func.isRequired,setIsDefaultTem:p.default.func.isRequired,setParentIdcon:p.default.func.isRequired,setNodeKey:p.default.func.isRequired,setTemplateNameVal:p.default.func.isRequired,setJson:p.default.func.isRequired,selectedKeys:p.default.array.isRequired,expandedKeys:p.default.array.isRequired,treeTemBillData:p.default.array.isRequired,treeTemPrintData:p.default.array.isRequired,def1:p.default.string.isRequired,templatePk:p.default.string.isRequired,searchValue:p.default.string.isRequired,pageCode:p.default.string.isRequired,appCode:p.default.string.isRequired,parentIdcon:p.default.string.isRequired,nodeKey:p.default.array.isRequired,copyId:p.default.string.isRequired,expandedTemKeys:p.default.array.isRequired,json:p.default.object.isRequired,isDefaultTem:p.default.string.isRequired},t.default=(0,u.connect)((function(e){return{treeData:e.TemplateSettingData.treeData,treeTemBillData:e.TemplateSettingData.treeTemBillData,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,selectedKeys:e.TemplateSettingData.selectedKeys,expandedKeys:e.TemplateSettingData.expandedKeys,def1:e.TemplateSettingData.def1,selectedTemKeys:e.TemplateSettingData.selectedTemKeys,templatePk:e.TemplateSettingData.templatePk,searchValue:e.TemplateSettingData.searchValue,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,parentIdcon:e.TemplateSettingData.parentIdcon,nodeKey:e.TemplateSettingData.nodeKey,copyId:e.TemplateSettingData.copyId,expandedTemKeys:e.TemplateSettingData.expandedTemKeys,json:e.TemplateSettingData.json,isDefaultTem:e.TemplateSettingData.isDefaultTem}}),{setTreeData:f.setTreeData,setTreeTemBillData:f.setTreeTemBillData,setTreeTemPrintData:f.setTreeTemPrintData,setExpandedKeys:f.setExpandedKeys,setSelectedKeys:f.setSelectedKeys,setDef1:f.setDef1,setSelectedTemKeys:f.setSelectedTemKeys,setExpandedTemKeys:f.setExpandedTemKeys,setTemplateNameVal:f.setTemplateNameVal,setTemplateTitleVal:f.setTemplateTitleVal,setTemplatePk:f.setTemplatePk,setSearchValue:f.setSearchValue,setPageCode:f.setPageCode,setAppCode:f.setAppCode,setParentIdcon:f.setParentIdcon,setNodeKey:f.setNodeKey,setCopyId:f.setCopyId,setJson:f.setJson,setIsDefaultTem:f.setIsDefaultTem})(L)},895:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageLayoutRight=t.PageLayoutLeft=t.PageLayoutHeader=t.PageScrollLayout=t.PageLayout=void 0;var n,o,r,l,i,s,d,c,p,u,f=v(a(12)),m=v(a(4)),h=v(a(8)),g=v(a(5)),y=v(a(6)),T=a(1),k=v(T),b=v(a(0));function v(e){return e&&e.__esModule?e:{default:e}}a(896);var C=v(a(33)).default.base.NCDiv,w=!1,D=(o=n=function(e){function t(e){(0,m.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleMouseUp=function(){w=!1},a.handleMouseMove=function(e){if(w){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}},a}return(0,y.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement("div",{className:"nc-workbench-page"},this.props.header?this.props.header:null,k.default.createElement("div",{onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+this.props.className},this.props.children))}}]),t}(T.Component),n.defaultProps={className:""},o),x=(l=r=function(e){function t(e){(0,m.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleMouseUp=function(){w=!1},a.handleMouseMove=function(e){if(w){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}},a.handleScroll=function(e){var t=a.refs.ncWorkbenchPageScroll.getBoundingClientRect(),n=t.y;t.width;if(n==a.initScrollContainerTop&&a.setState({suck:!1}),n<a.initScrollContainerTop){if(a.state.suck)return;a.containerWidthChange(),a.setState({suck:!0})}},a.containerWidthChange=function(){var e=a.refs.ncWorkbenchPageOwnpage.getBoundingClientRect().width;document.getElementsByClassName("nc-workbench-page-header")[0].style.width=e+"px",document.getElementById("suckTableHeader")&&(document.getElementById("suckTableHeader").style.width=e+"px")},a.state={suck:!1},a.initScrollContainerTop,a}return(0,y.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.containerWidthChange);var e=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;this.initScrollContainerTop=e}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.containerWidthChange)}},{key:"render",value:function(){var e=this.state.suck;return k.default.createElement("div",{className:"nc-workbench-page-scroll",onScroll:this.handleScroll},k.default.createElement("div",{className:" nc-workbench-page "},k.default.createElement("div",{className:"nc-workbench-page-container "+(e?"nc-workbench-suck":""),ref:"ncWorkbenchPageScroll"},this.props.header?this.props.header:null,k.default.createElement("div",{onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,ref:"ncWorkbenchPageOwnpage",className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+this.props.className},this.props.children))))}}]),t}(T.Component),r.defaultProps={className:""},l),E=(s=i=function(e){function t(e){(0,m.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.handleMouseDown=function(){w=!0},a}return(0,y.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement("div",{id:"layoutLeft",className:"nc-workbench-ownpage-left "+this.props.className},k.default.createElement("span",{className:"layout-drag-block",onMouseDown:this.handleMouseDown}),this.props.children)}}]),t}(T.Component),i.defaultProps={className:""},s),S=(c=d=function(e){function t(e){return(0,m.default)(this,t),(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e))}return(0,y.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement(C,{areaCode:C.config.HEADER,className:"nc-workbench-page-header "+this.props.className},this.props.children)}}]),t}(T.Component),d.defaultProps={className:""},c),P=(u=p=function(e){function t(){return(0,m.default)(this,t),(0,g.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return k.default.createElement("div",{className:"nc-workbench-ownpage-right "+this.props.className},this.props.children)}}]),t}(T.Component),p.defaultProps={className:""},u);D.propTypes={children:b.default.any.isRequired},E.propTypes={children:b.default.any.isRequired},P.propTypes={children:b.default.any.isRequired},t.PageLayout=D,t.PageScrollLayout=x,t.PageLayoutHeader=S,t.PageLayoutLeft=E,t.PageLayoutRight=P},896:function(e,t,a){var n=a(897);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(15)(n,o);n.locals&&(e.exports=n.locals)},897:function(e,t,a){(e.exports=a(13)(!1)).push([e.i,'.nc-workbench-page{position:absolute;top:0;z-index:10;height:100%;width:100%;padding:8px 0 0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.nc-workbench-page .nc-workbench-page-header{-webkit-box-flex:0;flex:0 0 45px;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;border-bottom:1px solid #d9d9d9;border-radius:3px 3px 0 0;background:#fff;padding:0 20px}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn{font-size:16px;color:#111;font-weight:700}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont{margin-right:6px;border-radius:50%;font-size:16px;padding:4px;font-weight:400;cursor:pointer}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont:hover{background:#e8e8e8}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-page-header .header_in_icon{display:-webkit-box;display:flex;font-weight:700;font-size:16px;color:#111;line-height:24px}.nc-workbench-page .nc-workbench-page-header .header_in_icon span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-ownpage{min-width:800px;border-radius:0 0 3px 3px}.nc-workbench-page .nc-workbench-ownpage-all{height:100%;display:-webkit-box;display:flex;-webkit-box-pack:start;justify-content:flex-start;background:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nc-workbench-page .nc-workbench-ownpage-left{position:relative;height:100%;min-width:280px}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block{position:absolute;right:-3px;z-index:10;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:block;padding:0 3px;height:100%;border-radius:3px;cursor:w-resize}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:after{content:"";display:block;width:1px;height:100%;background:#d9d9d9}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:hover:after{width:2px;background:rgba(0,0,0,.54)}.nc-workbench-page .nc-workbench-ownpage-right{min-width:50%;-webkit-box-flex:1;flex:1}.nc-workbench-page-scroll{height:100%;width:100%;overflow-y:auto}.nc-workbench-page-scroll .nc-workbench-page-container{margin-top:0;min-height:100%;background:#fff;border-radius:3px}.nc-workbench-page-scroll .nc-workbench-page-container .nc-workbench-page-header{position:static;-webkit-transition:top .7s ease;transition:top .7s ease;height:46px}.nc-workbench-page-scroll .nc-workbench-page-container .suck-table-header{position:static;-webkit-transition:top .7s ease;transition:top .7s ease}.nc-workbench-page-scroll .nc-workbench-suck{padding-top:80px}.nc-workbench-page-scroll .nc-workbench-suck .nc-workbench-page-header{position:fixed;z-index:1;top:44px}.nc-workbench-page-scroll .nc-workbench-suck .suck-table-header{position:fixed;z-index:1;top:94px}@media screen and (min-width:1280px){.nc-workbench-page{padding:8px 16px 0}}@media screen and (min-width:1440px){.nc-workbench-page{padding:8px 16px 0}}@media screen and (min-width:1600px){.nc-workbench-page{padding:8px 16px 0}}',""])},899:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAreaValidate=t.updateSaveFlag=t.setZoneDataFun=t.setCurrentBatchCell=t.updateBatchSource=t.setFormulaInfo=t.toggleFormula=t.clearData=t.updatePreviewData=t.updateSelectArea=t.updateAreaList=t.updateSelectCard=t.setZoneData=void 0;var n,o=a(3),r=(n=o)&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(432));t.setZoneData=function(e){return{type:l.ZONESETTING,data:e}},t.updateSelectCard=function(e){return{type:l.UPDATESELECTCARD,selectCard:e}},t.updateAreaList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:l.UPDATEAREALIST,areaList:e,init:t}},t.updateSelectArea=function(e){return{type:l.UPDATESELECTAREA,selectedArea:e}},t.updatePreviewData=function(e){return{type:l.PREVIEWDATA,previewData:e}},t.clearData=function(){return{type:l.CLEARDATA}},t.toggleFormula=function(e,t){return{type:l.TOGGLEFORMULA,formula:(0,r.default)({},e,t)}},t.setFormulaInfo=function(e){return{type:l.SETFORMULAINFO,formulaInfo:e}},t.updateBatchSource=function(e){return{type:l.UPDATEBATCHSOURCE,batchSource:e}},t.setCurrentBatchCell=function(e){return{type:l.SETCURRENTBATCHCELL,currentBatchCell:e}},t.setZoneDataFun=function(e){return{type:l.SETZONEFORMFUN,getFromData:e}},t.updateSaveFlag=function(e){return{type:l.UPDATESAVEFLAG,isSave:e}},t.updateAreaValidate=function(e){return{type:l.SETAREAVALIDATE,validate:e}}},902:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTree=void 0;var n,o=a(90),r=(n=o)&&n.__esModule?n:{default:n};t.createTree=function(e,t,a){e=r.default.cloneDeep(e);var n=l(e,a),o=n.treeArray,d=n.treeObject;return d=i(d,t),s(o,d,t)};var l=function(e,t){var a=[],n={};return e.map((function(e,o){e[t]?n.hasOwnProperty(e[t])?n[e[t]].push(e):(n[e[t]]=[],n[e[t]].push(e)):a.push(e)})),{treeArray:a,treeObject:n}},i=function(e,t){for(var a in e)e.hasOwnProperty(a)&&(e[a]=s(e[a],e,t));return e},s=function(e,t,a){return e.map((function(e,n){return t.hasOwnProperty(e[a])&&(e.children=t[e[a]]),e}))}},903:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(12)),o=c(a(4)),r=c(a(8)),l=c(a(5)),i=c(a(6)),s=a(1),d=c(s);function c(e){return e&&e.__esModule?e:{default:e}}a(904);var p=c(a(33)).default.base,u=p.NCButtonGroup,f=p.NCButton,m=p.NCMenu,h=p.NCDropdown,g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.createBtn=function(e){return e.map((function(e){if(e.isshow){if("btn"==e.divide)return d.default.createElement(f,{className:"divide-btn",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,onClick:function(){a.props.onClick(e.code)}},e.name);if("select"==e.divide){var t=d.default.createElement(m,{onClick:function(){a.props.onClick(e.code)}},d.default.createElement(m.Item,{key:"1",fieldid:e.fieldid||e.code},d.default.createElement("div",null,e.name)));return d.default.createElement(h,{overlay:t,trigger:["click"],fieldid:e.dropdownFieldid},d.default.createElement(f,{className:"margin-left-1",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,is_arrow:!0,style:{minWidth:18}},d.default.createElement("i",{className:"iconfont icon-hangcaozuoxiala1"})))}return d.default.createElement(f,{className:"margin-left-6 "+(e.className?e.className:""),key:e.code,colors:e.type,fieldid:e.fieldid||e.code,onClick:function(){a.props.onClick(e.code)}},e.name)}return null}))},a.createBtnGroup=function(e){return e.length>0?d.default.createElement(u,null,a.createBtn(e)):null},a.createButton=function(e){var t=e.filter((function(e){return e.group})),n=e.filter((function(e){return!e.group}));return d.default.createElement("div",null,a.createBtn(n),d.default.createElement("div",{style:{marginLeft:6}},a.createBtnGroup(t)))},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"buttons-component "+(this.props.className?this.props.className:"")},this.createButton(this.props.dataSource))}}]),t}(s.Component);t.default=g},904:function(e,t,a){var n=a(905);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(15)(n,o);n.locals&&(e.exports=n.locals)},905:function(e,t,a){(e.exports=a(13)(!1)).push([e.i,".buttons-component div{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.buttons-component .ant-btn-group{margin-left:6px}body .divide-btn{margin-left:6px;border-top-right-radius:0;border-bottom-right-radius:0}body .margin-left-1{margin-left:1px;width:18px;border-top-left-radius:0;border-bottom-left-radius:0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;padding:0}body .margin-left-1 .iconfont{font-size:12px}",""])},906:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(1)),o=i(a(198)),r=i(a(425)),l=a(34);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.appCode,a=(0,l.getStore)("APPICONSSTORE"),i=a&&a[t],s=o.default[i]?o.default[i]:r.default;return n.default.createElement("div",{style:{width:"24px",height:"24px",marginRight:"10px",background:"url("+s+") no-repeat 0px 0px",backgroundSize:"contain"}})}},937:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(431)),o=v(a(140)),r=v(a(430)),l=v(a(12)),i=v(a(4)),s=v(a(8)),d=v(a(5)),c=v(a(6)),p=a(1),u=v(p),f=a(29),m=a(899),h=a(874),g=v(a(26)),y=a(17),T=a(196),k=v(a(422)),b=a(90);function v(e){return e&&e.__esModule?e:{default:e}}function C(e){var t=this,a=this.props,n=a.requestUrl,o=a.requestData,r=a.templetData,l=r.pagecode,i=r.appcode,s=r.templetid,d=n||"/nccloud/platform/templet/querypage.do",c=o||{pagecode:l,appcode:i,templetid:s};Array.isArray(c)&&0==c.length||(0,g.default)({url:d,data:c,loading:!0,info:{name:(0,y.langCheck)("ZoneSetting-000028","pages",e),action:(0,y.langCheck)("ZoneSetting-000029","pages",e)},success:function(e){var a=e.data.data;a&&(t.props.meta.setMeta(a),o&&o.forEach((function(e){a[e.code]&&(a[e.code].position=e.position)})),t.props.updatePreviewData(a))}})}a(938);var w=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.showModalHidden=function(){a.props.setModalVisibel(!1)},a.createDom=function(){var e=a.props,t=e.editTable,n=e.form,o=e.search,r=n.createForm,l=t.createEditTable,i=o.NCCreateSearch,s=a.state.all_keys,d=[];return s.length&&s.map((function(e,t){switch(e.myAreaType){case"form":d.push(u.default.createElement("div",{className:"viewTemplateArea",key:"form"+t},u.default.createElement("div",{className:"descrip"},u.default.createElement("span",{key:"forms"+t}," ▼ "),""+e.name),r(e.id)));break;case"table":d.push(u.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},u.default.createElement("div",{className:"descrip"},u.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),l(e.id,{})));break;case"search":d.push(u.default.createElement("div",{className:"viewTemplateArea",key:"search"+t},u.default.createElement("div",{className:"descrip"},u.default.createElement("span",{key:"searchs"+t}," ▼ "),""+e.name),i(e.id)))}})),d},a.state={all_keys:[],json:{}},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.previewData){var a=e.previewData,l=[],i=function(e,n){var o=n.moduletype,r=n.code,i=a.formrelation;"table"!==o&&"form"!==o&&"search"!==o||"form"===o&&i&&n.relationcode in i||l.push({id:r,name:n.name,myAreaType:o,position:n.position}),"form"===o&&t.props.form.setFormStatus(r,"edit"),"table"===o&&t.refs[r]&&setTimeout((function(){0==t.props.editTable.getNumberOfRows(r)&&t.props.editTable.addRow(r),t.refs[r]=null}),10)},s=!0,d=!1,c=void 0;try{for(var p,u=(0,o.default)((0,n.default)(a));!(s=(p=u.next()).done);s=!0){var f=p.value,m=(0,r.default)(f,2);m[0];i(0,m[1])}}catch(e){d=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(d)throw c}}l&&l[0]&&l[0].position&&(l=(0,b.sortBy)(l,(function(e){return e.position}))),this.setState({all_keys:l})}}},{key:"componentDidMount",value:function(){var e=this;(0,T.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t}),C.call(e,t)}})}},{key:"render",value:function(){var e=this.state.json;return u.default.createElement(k.default,{maskClosable:!1,customHeader:(0,y.langCheck)("ZoneSetting-000121","pages",e),visible:this.props.previewVisibel,onOk:this.onOkDialog,onCancel:this.showModalHidden,width:"98%",className:"viewPageTem",centered:!0,footer:null,fieldid:"preview"},this.createDom())}}]),t}(p.Component);w=(0,h.createPage)({})(w),t.default=(0,f.connect)((function(e){return{areaList:e.zoneSettingData.areaList,previewData:e.zoneSettingData.previewData}}),{updatePreviewData:m.updatePreviewData})(w)},938:function(e,t,a){var n=a(939);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(15)(n,o);n.locals&&(e.exports=n.locals)},939:function(e,t,a){(e.exports=a(13)(!1)).push([e.i,".viewPageTem .u-modal-content .u-modal-body{overflow:auto;padding:20px 0}.viewPageTem .u-modal-content .u-modal-body .printContent{padding:20px}.viewPageTem .u-modal-content .viewTemplateArea{padding:0 20px}",""])},940:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setIsDefaultTem=t.setJson=t.setRoleUserDatas=t.setRoCheckedObjArray=t.setCopyId=t.setNodeKey=t.setTemplateTitleVal=t.setTemplateNameVal=t.setParentIdcon=t.setAppCode=t.setPageCode=t.setSearchValue=t.setTemplatePk=t.setSelectedTemKeys=t.setSelectedKeys=t.setExpandedKeys=t.setExpandedTemKeys=t.setDef1=t.setTreeTemPrintData=t.setTreeTemBillData=t.setTreeData=t.clearData=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(450));t.clearData=function(){return{type:n.CLEARDATA}},t.setTreeData=function(e){return{type:n.SETTREEDATA,data:e}},t.setTreeTemBillData=function(e){return{type:n.SETTREETEMBILLDATA,data:e}},t.setTreeTemPrintData=function(e){return{type:n.SETTREETEMPRINTDATA,data:e}},t.setDef1=function(e){return{type:n.SETDEF1,data:e}},t.setExpandedTemKeys=function(e){return{type:n.EXPANDEDTEMKEYS,data:e}},t.setExpandedKeys=function(e){return{type:n.EXPANDEDKEYS,data:e}},t.setSelectedKeys=function(e){return{type:n.SELECTEDKEYS,data:e}},t.setSelectedTemKeys=function(e){return{type:n.SELECTEDTEMKEYS,data:e}},t.setTemplatePk=function(e){return{type:n.TEMPLATEPK,data:e}},t.setSearchValue=function(e){return{type:n.SEARCHVALUE,data:e}},t.setPageCode=function(e){return{type:n.PAGECODE,data:e}},t.setAppCode=function(e){return{type:n.APPCODE,data:e}},t.setParentIdcon=function(e){return{type:n.PARENTIDCON,data:e}},t.setTemplateNameVal=function(e){return{type:n.TEMPLATENAMEVAL,data:e}},t.setTemplateTitleVal=function(e){return{type:n.TEMPLATETITLEVAL,data:e}},t.setNodeKey=function(e){return{type:n.NODEKEY,data:e}},t.setCopyId=function(e){return{type:n.COPYID,data:e}},t.setRoCheckedObjArray=function(e){return{type:n.ROCHECKEDOBJARRAY,data:e}},t.setRoleUserDatas=function(e){return{type:n.ROLEUSERDATAS,data:e}},t.setJson=function(e){return{type:n.JSON,data:e}},t.setIsDefaultTem=function(e){return{type:n.ISDEFAULTTEM,data:e}}},979:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var n=i(a(197));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.createElement(s,(0,n.default)(d,e))};var o=i(a(1)),r=a(874),l=a(17);function i(e){return e&&e.__esModule?e:{default:e}}var s=r.high.Refer,d=t.conf={placeholder:(0,l.langCheck)("0000PUB-000052"),rootNode:{refname:(0,l.langCheck)("0000PUB-000052"),refpk:"root"},refType:"tree",refName:(0,l.langCheck)("0000PUB-000053"),refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[(0,l.langCheck)("0000PUB-000032"),(0,l.langCheck)("0000PUB-000033")],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:{queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",refName:(0,l.langCheck)("0000PUB-000054"),rootNode:{refname:(0,l.langCheck)("0000PUB-000054"),refpk:"root"}},isShowUnit:!1}},996:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(197),r=(n=o)&&n.__esModule?n:{default:n};t.generateData=function(e){var t=[],a={};return e.map((function(e,n){var o=e.pid,r=e.code,l=e.name;e.appCode,e.pk;e.children&&delete e.children,e.text=r+" "+l,e.title=e.text,e.key=r,o?(a[o]||(a[o]=[]),a[o].push(e)):(e.children=[],t.push(e))})),{treeArray:t,treeObj:a}},t.generateTemData=function(e){var t=[],a={},n=[],o=[];return e.map((function(e,t){var a=e.templateId,r=(e.parentId,e.name),l=(e.type,e.code);e.children&&delete e.children,e.key=a,e.text=l+" "+r,e.pk=a,n.push(a),o.push(e)})),o.map((function(e){var o=e.templateId;e.parentId,e.name,e.type,e.code;n.includes(e.parentId)?(a[o]=[],a[o].push(e)):(e.children=[],t.push(e))})),{treeArray:t,treeObj:a}},t.generateRoData=function(e){var t=[];return e.map((function(e,a){var n=e.code,o=e.id,r=e.name;e.key=o,e.text=n+" "+r,e.title=e.text,t.push(e)})),t},t.generateTreeData=function e(t){return t.map((function(t,a){return(t=(0,r.default)({},t)).children?(t.isLeaf=!1,t.children=e(t.children)):t.isLeaf=!0,t}))}}}]);